"use strict";(self.webpackChunktictactoe=self.webpackChunktictactoe||[]).push([[628],{209:(e,r,t)=>{t.d(r,{A:()=>b});var o=t(522),l=t(579);const n={o:"blue",x:"red"},a=e=>{let{count:r=0,playerName:t="Player",weapon:a,currentPlayer:s}=e;const{gameInfo:i,gameType:c}=(0,o.Im)(),u={true:n[a],false:"white"},f={true:(0,l.jsx)("span",{children:i.me.weapon===a?"You":t}),false:(0,l.jsx)("span",{children:t})},m={true:a};return(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("span",{children:r}),(0,l.jsxs)("div",{className:`border-b-8 border-${u[`${s===a}`]}-500`,children:[(0,l.jsx)("span",{className:`text-${n[`${a}`]}-500 text-2xl`,children:m[`${"t"!==a}`]}),f[`${"pvp"!==c}`]]})]})};var s=t(320),i=t(43);const c=e=>{let{}=e;return(0,l.jsx)("div",{className:"w-16 h-16 border-8 border-blue-400 rounded-full"})},u=e=>{let{}=e;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:"absolute w-20 h-2 bg-red-600 rotate-45"}),(0,l.jsx)("div",{className:"absolute w-20 h-2 bg-red-600 -rotate-45"})]})};var f=t(678);const m=e=>{let{gameOverType:r}=e;return(0,l.jsx)("div",{className:{TG:"",LD:"absolute top-0 left-0 w-[130%] h-[6px] bg-yellow-500 rotate-45 origin-top-left animate-growLeftDiagonal",RD:"absolute top-0 right-0 w-[141%] h-[6px] bg-yellow-500 -rotate-45 origin-right animate-growRightDiagnal",row1:"absolute bg-yellow-500 animate-grow transform top-[15%] left-0 w-full h-2",row2:"absolute bg-yellow-500 animate-grow transform top-[47.5%] left-0 w-full h-2",row3:"absolute bg-yellow-500 animate-grow transform top-[80%] left-0 w-full h-2",col1:"absolute top-0 left-[16.5%] w-2 h-full bg-yellow-500 animate-grow-vert",col2:"absolute bg-yellow-500 animate-grow-vert transform left-[48.5%] top-0 h-full w-2",col3:"absolute bg-yellow-500 animate-grow-vert transform left-[80%] top-0 h-full w-2"}[r]})};var d=t(864);const h=e=>{let{player:r,gameInfo:t}=e;return(0,l.jsx)("div",{className:`text-${n[r]}-500 text-2xl font-bold`,children:{true:"Your Turn",false:"Opponent's Turn"}[`${t.me.weapon===r}`]})},x=e=>{let{}=e;return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("span",{className:"flex justify-center text-2xl font-bold w-[500px]"}),(0,l.jsx)(s.A,{title:"Copy Url",color:"blue",onClick:async()=>{let e=window.location.href[window.location.href.length-1],r=`${window.location.href.substring(0,window.location.href.length-1)}${"x"===e?"o":"x"}`;try{await navigator.clipboard.writeText(r),console.log("URL copied!",r)}catch(t){console.error("Copy failed:",t)}}})]})},g=[" border-r-8 border-b-8 border-gray-400 "," border-r-8 border-b-8  border-gray-400 "," border-b-8 border-gray-400 "," border-r-8 border-b-8 "," border-r-8 border-b-8 "," border-b-8 "," border-r-8 "," border-r-8 "," flex "],p={totalPlayersCount:0,numberOfClients:2},y=e=>{let{}=e;const{gameType:r,gameId:t,board:n,setBoard:a,currentPlayer:s,setCurrentPlayer:y,gameWinner:w,gameInfo:v,handleGameOver:b,resetGame:j,resetScore:P}=(0,o.Im)(),[N,C]=(0,i.useState)(p),I={o:(0,l.jsx)(c,{}),x:(0,l.jsx)(u,{})};(0,i.useEffect)(()=>{if(console.log("new game begin"),P(),j(),"online"===r)return d.s.on("moveMade",e=>{let{newBoard:r,player:t}=e;b(r),a([...r]),y("o"===t?"x":"o")}),d.s.on("playerJoined",e=>{let{player:r,numberOfClients:t,totalPlayersCount:o}=e;console.log(`${r} joined`,t,o),C({numberOfClients:t,totalPlayersCount:o})}),d.s.on("playerLeft",e=>{let{socketId:r,numberOfClients:t}=e;console.log(`${r} left`,t),C({...N,numberOfClients:t})}),()=>{d.s.off("moveMade"),d.s.off("playerJoined"),d.s.emit("leaveGame",{gameId:t,player:v.me.weapon})}},[]);const $=(e,o)=>{if(s!==v.me.weapon&&("pvai"===r||"online"===r))return;let l=n.flat();if(!l[e]){l[e]=o;let n=(0,f.xt)(l,3);b(n),y("o"===s?"x":"o"),a([...n]),"online"===r&&(e=>{d.s.emit("makeMove",{gameId:t,newBoard:e,player:s})})(n)}},T=()=>(0,l.jsxs)(i.Fragment,{children:[g.map((e,r)=>(0,l.jsx)("div",{className:`${e} border-gray-400 flex items-center justify-center cursor-pointer`,onClick:$.bind(void 0,r,s),children:I[n.flat()[r]]},r)),w&&"TG"!==w.type&&(0,l.jsx)(m,{gameOverType:w.type})]}),M={"true-false":(0,l.jsx)(x,{}),"false-false":(0,l.jsx)(T,{}),"true-true":(0,l.jsx)(T,{})};return(0,l.jsx)(i.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[N.numberOfClients===N.totalPlayersCount&&(0,l.jsx)(h,{player:s,gameInfo:v}),(0,l.jsx)("div",{className:"grid grid-cols-3 grid-rows-3 w-72 h-72  relative",children:M[`${"online"===r}-${N.numberOfClients===N.totalPlayersCount}`]})]})})},w=e=>{let{gameWinner:r,gameInfo:t,gameType:o}=e;const[n,a]=(0,i.useState)(5);(0,i.useEffect)(()=>{if(n>0){let e=setInterval(()=>{a(n-1),clearInterval(e)},1e3)}},[n]);const s={"true-true-false":`${t[r.value].name} has won the match`,"true-false-false":`${t[r.value].name} has won the match`,"false-true-false":"You won the match","false-false-false":"You lost the match","false-false-true":"TIE","true-false-true":"TIE"};return(0,l.jsxs)("div",{className:"flex justify-center flex-col items-center w-full h-full bg-gray-500/50 text-white text-2xl square",children:[(0,l.jsx)("p",{children:s[`${"pvp"===o}-${t.me.weapon===r.value}-${"t"===r.value}`]}),(0,l.jsxs)("p",{children:[" replaying game in ",n]})]})},v=e=>{let{players:r,aiPlayer:t,setAiPlayer:o}=e;return(0,l.jsx)("select",{value:t,onChange:e=>o(e.target.value),children:r.map((e,r)=>(0,l.jsx)("option",{value:e.value,children:e.name},r))})},b=e=>{let{}=e;const{gameWinner:r,gameInfo:t,currentPlayer:n,gameType:c,setAiPlayer:u,aiPlayer:f,resetScore:m}=(0,o.Im)(),d={pvai:(0,l.jsx)(v,{players:Object.values(o.JJ),aiPlayer:f,setAiPlayer:u})};return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,l.jsxs)("div",{className:"flex w-full justify-between",children:[(0,l.jsx)(s.A,{title:"Main Menu",link:"/"}),d[c],(0,l.jsx)(s.A,{title:"Reset Score",color:"red",onClick:m})]}),(0,l.jsx)("div",{className:"flex w-full justify-center",children:(0,l.jsx)(y,{})}),(0,l.jsxs)("div",{className:"flex w-full justify-around",children:[(0,l.jsx)(a,{currentPlayer:n,playerName:t.o.name,count:t.o.score,weapon:"o"}),(0,l.jsx)(a,{currentPlayer:n,playerName:t.t.name,count:t.t.score,weapon:"t"}),(0,l.jsx)(a,{currentPlayer:n,playerName:t.x.name,count:t.x.score,weapon:"x"})]})]}),(0,l.jsx)("div",{className:"mt-[-84%] flex w-full h-[101%]",children:r&&(0,l.jsx)(w,{gameType:c,gameInfo:t,gameWinner:r})})]})}},320:(e,r,t)=>{t.d(r,{A:()=>a});var o=t(43),l=t(615),n=t(579);const a=e=>{let{title:r="Click Me",link:t="/",color:a="green",onClick:s}=e,i=new Map;return i.set("green","from-green-400 via-green-500 to-green-600 hover:from-green-500 hover:to-green-700"),i.set("red","from-red-400 via-red-500 to-red-600 hover:from-red-500 hover:to-red-700"),i.set("blue","from-blue-400 via-blue-500 to-blue-600 hover:from-blue-500 hover:to-blue-700"),s?(0,n.jsx)("div",{onClick:s,className:`text-center inline-block bg-gradient-to-r ${i.get(a)} text-white font-semibold py-2 px-6 rounded-lg shadow-md  transition-all duration-300 cursor-pointer`,children:r}):(0,n.jsx)(o.Fragment,{children:(0,n.jsx)(l.N_,{to:t,className:`text-center inline-block bg-gradient-to-r ${i.get(a)} text-white font-semibold py-2 px-6 rounded-lg shadow-md  transition-all duration-300`,children:r})})}},522:(e,r,t)=>{t.d(r,{Im:()=>f,JJ:()=>i,Sj:()=>u});var o=t(43),l=t(678),n=t(579);const a=[["","",""],["","",""],["","",""]],s={me:{name:"Player1",weapon:"o",score:0},o:{name:"Player1",weapon:"o",score:0},x:{name:"Player2",weapon:"x",score:0},t:{name:"TIE",weapon:"t",score:0}},i={e:{value:"e",name:"Easy",method:l.K_},m:{value:"m",name:"Medium",method:l.f0},h:{value:"h",name:"Hard",method:l.ue}},c=(0,o.createContext)(void 0),u=e=>{let{children:r,gameType:t,onlinePlayer:u,gameId:f}=e;const[m,d]=(0,o.useState)(a),[h,x]=(0,o.useState)("o"),[g,p]=(0,o.useState)(s),[y,w]=(0,o.useState)(!1),[v,b]=(0,o.useState)("e");console.log("gameInfo",g),(0,o.useEffect)(()=>{j()},[m]);const j=async()=>{if("pvai"===t&&g.me.weapon!==h&&!y){let e=await i[v].method(m,h);P(e),d([...e]),x("o"===h?"x":"o")}"online"===t&&(g.me=g[u||"o"],p({...g}))},P=e=>{const r=(0,l.Pn)(e);if(w(r),r){g[r.value].score+=1,p({...g});let e=setTimeout(()=>{N(),clearTimeout(e)},5e3)}},N=()=>{d(a),x(g.me.weapon),w(!1)};return(0,n.jsx)(c.Provider,{value:{gameType:t,gameId:f,board:m,setBoard:d,currentPlayer:h,setCurrentPlayer:x,aiPlayer:v,setAiPlayer:b,gameWinner:y,setGameWinner:w,resetGame:N,resetScore:()=>{p(JSON.parse(JSON.stringify(s)))},gameInfo:g,setGameInfo:p,handleGameOver:P},children:r})},f=()=>{const e=(0,o.useContext)(c);if(!e)throw new Error("useGame must be used within a GameProvider");return e}},628:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});var o=t(209),l=t(522),n=t(43),a=t(579);const s=e=>{let{}=e;return(0,a.jsx)(n.Fragment,{children:(0,a.jsx)(l.Sj,{gameType:"pvai",children:(0,a.jsx)(o.A,{})})})}},678:(e,r,t)=>{t.d(r,{K_:()=>a,Pn:()=>l,f0:()=>f,ue:()=>d,xt:()=>o});const o=(e,r)=>Array.from({length:Math.ceil(e.length/r)},(t,o)=>e.slice(o*r,o*r+r)),l=e=>{let r=n(e);return r.length>0&&r[0]},n=e=>{const r=[],t=e.length;e.forEach((e,t)=>{e.every(r=>r===e[0])&&""!==e[0]&&r.push({type:`row${t+1}`,value:e[0]})});for(let n=0;n<t;n++){const o=e[0][n];let l=!0;for(let r=1;r<t;r++)if(e[r][n]!==o){l=!1;break}l&&""!==o&&r.push({type:`col${n+1}`,value:o})}const o=e[0][0];e.every((e,r)=>e[r]===o)&&""!==o&&r.push({type:"LD",value:o});const l=e[0][t-1];if(e.every((e,r)=>e[t-1-r]===l)&&""!==l&&r.push({type:"RD",value:l}),r.length<1){(e=>e.every(e=>e.every(e=>""!==e.trim())))(e)&&r.push({type:"TG",value:"t"})}return r},a=async(e,r)=>{let t=[],l=e.flat();l.forEach((e,r)=>{""===e&&t.push(r)});const n=Math.max(...t),a=Math.min(...t);let c=i(a,n);for(;!t.includes(c);)c=i(a,n);return l[c]=r,await s(1e3),o(l,3)};function s(e){return new Promise(r=>setTimeout(r,e))}const i=(e,r)=>Math.floor(Math.random()*(r-e+1))+e;function c(e){return"x"===e?"o":"x"}function u(e,r,t,o){const l=function(e,r){const t=c(r),o=[...e,[0,1,2].map(r=>[e[0][r],e[1][r],e[2][r]]),[e[0][0],e[1][1],e[2][2]],[e[0][2],e[1][1],e[2][0]]];for(const l of o){if(l.every(e=>e===r))return 10;if(l.every(e=>e===t))return-10}return 0}(e,o);if(10===l||-10===l)return l-r;if(!function(e){return e.some(e=>e.includes(""))}(e))return 0;const n=c(o);let a=t?-1/0:1/0;for(let s=0;s<3;s++)for(let l=0;l<3;l++)if(""===e[s][l]){e[s][l]=t?o:n;const i=u(e,r+1,!t,o);e[s][l]="",a=t?Math.max(a,i):Math.min(a,i)}return a}const f=async(e,r)=>{let t=-1/0,o=[-1,-1];for(let s=0;s<3;s++)for(let l=0;l<3;l++)if(""===e[s][l]){e[s][l]=r;const n=u(e,0,!1,r);e[s][l]="",n>t&&(t=n,o=[s,l])}const l=function(e){return e.map(e=>[...e])}(e),[n,a]=o;return-1!==n&&-1!==a&&(l[n][a]=r),await s(1e3),l},m=()=>{let e="x",r="o";const t=(o,l,n)=>{const a=(t=>{for(let o=0;o<3;o++)if(t[o][0]===t[o][1]&&t[o][1]===t[o][2]){if(t[o][0]===e)return 10;if(t[o][0]===r)return-10}for(let o=0;o<3;o++)if(t[0][o]===t[1][o]&&t[1][o]===t[2][o]){if(t[0][o]===e)return 10;if(t[0][o]===r)return-10}if(t[0][0]===t[1][1]&&t[1][1]===t[2][2]){if(t[0][0]===e)return 10;if(t[0][0]===r)return-10}if(t[0][2]===t[1][1]&&t[1][1]===t[2][0]){if(t[0][2]===e)return 10;if(t[0][2]===r)return-10}return 0})(o);if(10===a||-10===a)return a;if(!(e=>{for(let r=0;r<3;r++)for(let t=0;t<3;t++)if(""===e[r][t])return!0;return!1})(o))return 0;if(n){let r=-1/0;for(let n=0;n<3;n++)for(let a=0;a<3;a++)""===o[n][a]&&(o[n][a]=e,r=Math.max(r,t(o,l+1,!1)),o[n][a]="");return r}{let e=1/0;for(let n=0;n<3;n++)for(let a=0;a<3;a++)""===o[n][a]&&(o[n][a]=r,e=Math.min(e,t(o,l+1,!0)),o[n][a]="");return e}};return{findBestMove:r=>{let o=-1/0,l={row:-1,col:-1};for(let n=0;n<3;n++)for(let a=0;a<3;a++)if(""===r[n][a]){r[n][a]=e;const s=t(r,0,!1);r[n][a]="",s>o&&(o=s,l={row:n,col:a})}return l},setPlayer(t){e=t,r="x"===t?"o":"x"}}},d=async(e,r)=>{const t=m();t.setPlayer(r);const o=t.findBestMove(e);return console.log("Best move for AI:",o),e[o.row][o.col]=r,await s(1e3),e}},864:(e,r,t)=>{t.d(r,{s:()=>o});const o=(0,t(104).io)("https://tictactoe-server-528z.onrender.com",{transports:["websocket"]})}}]);
//# sourceMappingURL=628.3a31b9d8.chunk.js.map